#!/usr/bin/env bash
# rparu - Cerebro RAM build wrapper for paru
set -euo pipefail

SCRIPT_DIR="$HOME/cerebro_scripts"
LOG_DIR="$SCRIPT_DIR/logs"
mkdir -p "$LOG_DIR"

ACTION="$1"
shift || true

RAM_BUILD="$SCRIPT_DIR/ram_build.sh"

echo "[*] rparu called with action: $ACTION $*"

# Only wrap install/update packages
if [[ "$ACTION" =~ ^(S|Syu|U)$ ]]; then
    echo "[*] Using RAM build for AUR packages..."
    $RAM_BUILD "$@" | tee -a "$LOG_DIR/rparu.log"
else
    echo "[*] Default paru call..."
    paru "$ACTION" "$@"
fi
